function onYouTubeIframeAPIReady(){PTVideoTriggers.YtApiReady()}window._wq=window._wq||[],function(e,r){function t(){var r=!1;n=window.setInterval(function(){PTFeatureBase.$.each(e.triggerOpts,function(t,a){if(!e.triggers[a.playerId]){var i,n={};switch(n.options=PTFeatureBase.$.extend({},e.defaults,a),a.type){case"youtube":i=e.ytTrackDependencies;break;case"wistia":i=e.wistiaTrackDependencies;break;case"vimeo":i=e.vimeoTrackDependencies;break;case"vidalytics":i=e.vidalyticsTrackDependencies}n.tracker=PTFeatureBase.$.extend({},e.defaultTracker,i),n.tracker.options=PTFeatureBase.$.extend({},e.defaultOptions,a),n.tracker.prepPlayer()?e.triggers[a.playerId]=n:r=!0}})},2500),r&&window.clearInterval(n)}function a(){s=!0,t()}function i(){PTFeatureBase.ready?a():PTFeatureBase.bind("PTFeatureBaseReady",a)}if(!e.videoTriggersBaseExists){var n,s=!1,o=!1,c=!1;e.videoTriggersBaseExists=!0,e.triggerOpts=[],e.triggers={},e.defaultOptions={triggerType:"cue"},e.defaultTracker={options:null,player:null,clockPlayTracker:null,previousTick:-1,startAt:0,lapTime:0,startTimer:function(){this.startAt=this.startAt?this.startAt:(new Date).getTime()},stopTimer:function(){this.lapTime=this.startAt?this.lapTime+(new Date).getTime()-this.startAt:this.lapTime,this.startAt=0},timeTimer:function(){return(this.lapTime+(this.startAt?(new Date).getTime()-this.startAt:0))/1e3},genericTrackStart:function(){var r=this;r.startTimer(),r.clockPlayTracker=window.setInterval(function(){var t=Math.round(r.timeTimer());t!=r.previousTick&&(r.previousTick=t,e.videoProgress(t,r.options.playerId))},500)},genericTrackStop:function(){var e=this;e.stopTimer(),this.clockPlayTracker&&window.clearInterval(this.clockPlayTracker)}},e.ytTrackDependencies={prepPlayer:function(){var e,r=this;switch(r.options.triggerType){case"cue":e=r.cueTrack;break;case"total":e=r.timeTrack}try{var t=r.options.playerId,a=null;return PTFeatureBase.$("#"+t).length&&(a=PTFeatureBase.$("#"+t)[0]),PTFeatureBase.$("."+t).length&&(a=PTFeatureBase.$("."+t)[0]),r.player=new YT.Player(a,{events:{onStateChange:e.bind(this),onReady:function(e){1===e.target.getPlayerState()&&(e.target.pauseVideo(),e.target.playVideo())}}}),!0}catch(i){return!1}},cueTrack:function(r){var t=this;1==r.data?t.clockPlayTracker=window.setInterval(function(){var r=Math.round(t.player.getCurrentTime());r!=t.previousTick&&(t.previousTick=r,e.videoProgress(r,t.options.playerId))},500):t.clockPlayTracker&&window.clearInterval(t.clockPlayTracker)},timeTrack:function(r){var t=this;1==r.data?(t.startTimer(),t.clockPlayTracker=window.setInterval(function(){var r=Math.round(t.timeTimer());r!=t.previousTick&&(t.previousTick=r,e.videoProgress(r,t.options.playerId))},500)):t.clockPlayTracker&&(t.stopTimer(),window.clearInterval(t.clockPlayTracker))}},e.vimeoTrackDependencies={prepPlayer:function(){var r=this;try{var t=r.options.playerId,a=null;PTFeatureBase.$("#"+t).length&&(a=PTFeatureBase.$("#"+t)[0]),PTFeatureBase.$("."+t).length&&(a=PTFeatureBase.$("."+t)[0]),r.player=new Vimeo.Player(a)}catch(i){return!1}switch(r.options.triggerType){case"cue":r.player.on("timeupdate",function(t){var a=Math.round(t.seconds);a!=r.previousTick&&(r.previousTick=a,e.videoProgress(a,r.options.playerId))});break;case"total":r.player.getPaused().then(function(e){e||r.genericTrackStart()}),r.player.on("play",function(){r.genericTrackStart()}),r.player.on("pause",function(){r.genericTrackStop()}),r.player.on("finish",function(){r.genericTrackStop()})}return!0}},e.wistiaTrackDependencies={prepPlayer:function(){var r=this,t={};return t[r.options.playerId]=function(t){switch(r.player=t,r.options.triggerType){case"cue":r.player.bind("timechange",function(t){var a=Math.round(t);a!=r.previousTick&&(r.previousTick=a,e.videoProgress(a,r.options.playerId))});break;case"total":"playing"==r.player.state()&&r.genericTrackStart(),r.player.bind("play",function(){r.genericTrackStart()}),r.player.bind("pause",function(){r.genericTrackStop()}),r.player.bind("end",function(){r.genericTrackStop()})}},window._wq.push(t),!0}},e.vidalyticsTrackDependencies={prepPlayer:function(){var r=this;if(r.player=r.getPlayer(),!r.player._player)return!1;switch(r.options.triggerType){case"cue":r.player._player.addEventHandler("onTimeChanged",function(){var t=r.player.getCurrentVideoTime();t!==r.previousTick&&(r.previousTick=t,e.videoProgress(t,r.options.playerId))});break;case"total":r.player.isPlaying()&&r.genericTrackStart(),r.player._player.addEventHandler("onPlay",function(){r.genericTrackStart()}),r.player._player.addEventHandler("onPaused",function(){r.genericTrackStop()}),r.player._player.addEventHandler("onPlaybackFinished",function(){r.genericTrackStop()})}return!0},getPlayer:function(){var e=(window._vidalytics||{}).embeds||{};return e[this.options.playerId]?e[this.options.playerId].player||{}:{}}},e.getDebug=function(){return{status:{videoTriggersExists:e.videoTriggersBaseExists,videoTriggersStart:s,videoTriggersYTReady:o,videoTriggersVimeoReady:c}}},e.listen=function(r){switch(e.triggerOpts.push(r),r.type){case"youtube":if(o)i();else{var t=function(){setTimeout(function(){o||e.YtApiReady()},2e3)};PTFeatureBase.loadScript("https://www.youtube.com/iframe_api",t),PTFeatureBase.bind("youTubeIframeApiReady",i)}break;case"vimeo":c?i():PTFeatureBase.loadScript("https://player.vimeo.com/api/player.js",function(){c=!0,i()});break;default:i()}},e.videoProgress=function(r,t){var a=e.triggers[t];if(PTFeatureBase.$.inArray(r,a.options.times)!==-1){var i={t:r,Id:PTFeatureBase.getContactId(),Email:PTFeatureBase.getContactEmail()};i.Email||i.Id?PTFeatureBase.callFeature(a.options.feature,"trigger",i,"r"):PTFeatureBase.waitForContact(a.options.feature,"trigger",i,"r")}},e.YtApiReady=function(){o=!0,PTFeatureBase.trigger("youTubeIframeApiReady")}}}(window.PTVideoTriggers=window.PTVideoTriggers||{})